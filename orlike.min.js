const htm_ele=''+'<a class="likeit orlike" href="javascript:void(0)">'+'<i class="fa fa-thumbs-up" aria-hidden="true"><span>0</span></i>'+'</a>'+'<a class="dislikeit orlike" href="javascript:void(0)">'+'<i class="fa fa-thumbs-down" aria-hidden="true"><span>0</span></i>'+'</a>'+'';function setCookie(a,b,c){var d=new Date();d.setTime(d.getTime()+(c*24*60*60*1000));var e="expires="+d.toGMTString();document.cookie=a+"="+b+"; "+e}function getCookie(a){var b=a+"=";var d=document.cookie.split(';');for(var i=0;i<d.length;i++){var c=d[i].trim();if(c.indexOf(b)==0){return c.substring(b.length,c.length)}}return""}function OrLike({serverUrl="",el=""}){$(el).html(htm_ele);this.serverUrl=serverUrl;this.init();$('.likeit').click({obj:this},this.like);$('.dislikeit').click({obj:this},this.dislike)}OrLike.prototype.init=function(){server_url=this.serverUrl;obj=this;$.ajax({type:'GET',url:server_url+'/ckusr',dataType:'jsonp',jsonp:"callback",jsonpCallback:"success",success:function(a){if(a.stat=='ok'){if(getCookie(a.ckid)){setCookie(a.ckid,a.uid,30)}obj.query()}else{console.error('connect orlike failed!!!')}},})}OrLike.prototype.query=function(){server_url=this.serverUrl;$.ajax({type:'GET',url:server_url+'/qry?link='+window.location.pathname,dataType:'jsonp',jsonp:"callback",jsonpCallback:"success",success:function(a){if(a.stat=='ok'){$('.likeit i span').text(a['like']);$('.dislikeit i span').text(a['dislike'])}else{console.error('query orlike failed!!!')}},})}OrLike.prototype.like=function(a){obj=a.data.obj;server_url=obj.serverUrl;$.ajax({type:'GET',url:server_url+'/orl?method=like&link='+window.location.pathname,dataType:'jsonp',jsonp:"callback",jsonpCallback:"success",success:function(){obj.query()},})}OrLike.prototype.dislike=function(a){obj=a.data.obj;server_url=obj.serverUrl;$.ajax({type:'GET',url:server_url+'/orl?method=dislike&link='+window.location.pathname,dataType:'jsonp',jsonp:"callback",jsonpCallback:"success",success:function(){obj.query()},})}