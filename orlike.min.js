const htm_ele='<a class="likeit orlike" href="javascript:void(0)"><i class="fa fa-thumbs-up" aria-hidden="true"><span>0</span></i></a><a class="dislikeit orlike" href="javascript:void(0)"><i class="fa fa-thumbs-down" aria-hidden="true"><span>0</span></i></a>';function setCookie(e,i,r){var s=new Date;s.setTime(s.getTime()+24*r*60*60*1e3);s="expires="+s.toGMTString();document.cookie=e+"="+i+"; "+s}function getCookie(e){for(var i=e+"=",r=document.cookie.split(";"),s=0;s<r.length;s++){var t=r[s].trim();if(0==t.indexOf(i))return t.substring(i.length,t.length)}return""}function OrLike({serverUrl:e="",el:i=""}){$(i).html(htm_ele),this.serverUrl=e,this.ckid="",this.init(),$(".likeit").click({obj:this},this.like),$(".dislikeit").click({obj:this},this.dislike)}OrLike.prototype.init=function(){server_url=this.serverUrl,obj=this,$.ajax({type:"GET",url:server_url+"/ckusr",dataType:"jsonp",jsonp:"callback",jsonpCallback:"success",xhrFields:{withCredentials:!0},async:!1,crossDomain:!0,success:function(e){"ok"==e.stat?(obj.ckid=e.ckid,getCookie(e.ckid)||setCookie(e.ckid,e.uid,30),obj.query()):console.error("connect orlike failed!!!")}})},OrLike.prototype.query=function(){server_url=this.serverUrl,$.ajax({type:"GET",url:server_url+"/qry?link="+window.location.pathname,dataType:"jsonp",jsonp:"callback",jsonpCallback:"success",xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){"ok"==e.stat?($(".likeit i span").text(e.like),$(".dislikeit i span").text(e.dislike)):console.error("query orlike failed!!!")}})},OrLike.prototype.orl=function(i,e){server_url=i.serverUrl,req_url=server_url+"/orl?method="+e+"&link="+window.location.pathname+"&"+i.ckid+"="+getCookie(i.ckid),$.ajax({type:"GET",url:req_url,dataType:"jsonp",jsonp:"callback",jsonpCallback:"success",xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){i.query()}})},OrLike.prototype.like=function(e){obj=e.data.obj,obj.orl(obj,"like")},OrLike.prototype.dislike=function(e){obj=e.data.obj,obj.orl(obj,"dislike")};